<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario - Foro Académico UPA</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="../css/styles.css">
    
    <style>
        .fc {
            border-radius: 8px;
            overflow: hidden;
        }
        
        .fc-event {
            border: none;
            padding: 2px 4px;
            cursor: pointer;
        }
        
        .legend-item {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-upa-primary sticky-top shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="../dashboard.html">
                <i class="fas fa-graduation-cap fa-2x me-2"></i>
                <span class="fw-bold d-none d-md-inline">Foro Académico UPA</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarContent">
                <div class="d-flex align-items-center ms-auto">
                    <div class="dropdown">
                        <button class="btn btn-link text-white d-flex align-items-center" data-bs-toggle="dropdown">
                            <img src="https://ui-avatars.com/api/?name=U&background=FF6600&color=fff" 
                                 class="rounded-circle me-2" width="35" height="35">
                            <span class="d-none d-md-inline">Usuario</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="../dashboard.html"><i class="fas fa-home me-2"></i> Dashboard</a></li>
                            <li><a class="dropdown-item" href="perfil.html"><i class="fas fa-user me-2"></i> Mi Perfil</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-2"></i> Cerrar Sesión
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid py-4">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../dashboard.html">Inicio</a></li>
                <li class="breadcrumb-item active">Calendario Académico</li>
            </ol>
        </nav>

        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold">
                <i class="fas fa-calendar-alt me-2"></i> Calendario Académico
            </h2>
            <button class="btn btn-upa-primary" data-bs-toggle="modal" data-bs-target="#nuevoEventoModal">
                <i class="fas fa-plus me-2"></i> Nuevo Evento
            </button>
        </div>

        <div class="row">
            <!-- Calendario Principal -->
            <div class="col-lg-9">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body">
                        <div id="calendar"></div>
                    </div>
                </div>

                <!-- Leyenda de Colores -->
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h6 class="fw-bold mb-3">
                            <i class="fas fa-palette me-2"></i> Categorías de Eventos
                        </h6>
                        <div class="d-flex flex-wrap gap-2">
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #dc3545;"></div>
                                <span>Exámenes</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #ffc107;"></div>
                                <span>Entregas</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #0d6efd;"></div>
                                <span>Clases Especiales</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #198754;"></div>
                                <span>Eventos Institucionales</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #6f42c1;"></div>
                                <span>Otros</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar con Próximos Eventos -->
            <div class="col-lg-3">
                <div class="card border-0 shadow-sm mb-3">
                    <div class="card-header bg-white">
                        <h6 class="mb-0 fw-bold">
                            <i class="fas fa-clock me-2"></i> Próximos Eventos
                        </h6>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <div class="list-group-item">
                                <div class="d-flex align-items-start">
                                    <div class="bg-danger text-white rounded p-2 me-3" style="min-width: 50px; text-align: center;">
                                        <strong class="d-block">15</strong>
                                        <small>OCT</small>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Examen Final BD</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-clock me-1"></i> 10:00 AM
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="list-group-item">
                                <div class="d-flex align-items-start">
                                    <div class="bg-warning text-white rounded p-2 me-3" style="min-width: 50px; text-align: center;">
                                        <strong class="d-block">18</strong>
                                        <small>OCT</small>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Entrega Proyecto Web</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-clock me-1"></i> 11:59 PM
                                        </small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="list-group-item">
                                <div class="d-flex align-items-start">
                                    <div class="bg-success text-white rounded p-2 me-3" style="min-width: 50px; text-align: center;">
                                        <strong class="d-block">20</strong>
                                        <small>OCT</small>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Inicio de Vacaciones</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-calendar me-1"></i> Todo el día
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filtros -->
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white">
                        <h6 class="mb-0 fw-bold">
                            <i class="fas fa-filter me-2"></i> Filtrar por Materia
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="bd" checked>
                            <label class="form-check-label" for="bd">
                                Bases de Datos
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="web" checked>
                            <label class="form-check-label" for="web">
                                Programación Web
                            </label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="redes" checked>
                            <label class="form-check-label" for="redes">
                                Redes
                            </label>
                        </div>
                        <hr>
                        <button class="btn btn-sm btn-outline-primary w-100">
                            <i class="fas fa-download me-2"></i> Exportar a Google Calendar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Nuevo Evento -->
    <div class="modal fade" id="nuevoEventoModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Nuevo Evento</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label class="form-label">Título del Evento *</label>
                            <input type="text" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Categoría *</label>
                            <select class="form-select" required>
                                <option value="">Selecciona</option>
                                <option value="examen">Examen</option>
                                <option value="entrega">Entrega</option>
                                <option value="clase">Clase Especial</option>
                                <option value="evento">Evento Institucional</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Materia</label>
                            <select class="form-select">
                                <option value="">Selecciona (opcional)</option>
                                <option>Bases de Datos</option>
                                <option>Programación Web</option>
                                <option>Redes</option>
                            </select>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fecha Inicio *</label>
                                <input type="date" class="form-control" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Hora Inicio</label>
                                <input type="time" class="form-control">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fecha Fin</label>
                                <input type="date" class="form-control">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Hora Fin</label>
                                <input type="time" class="form-control">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descripción</label>
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="recordatorio">
                            <label class="form-check-label" for="recordatorio">
                                Enviar recordatorio por correo
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-upa-primary">Crear Evento</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ver Evento -->
    <div class="modal fade" id="verEventoModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="eventoTitulo">Examen Final - Bases de Datos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <span class="badge bg-danger mb-2">Examen</span>
                        <p class="mb-2">
                            <i class="fas fa-calendar me-2"></i>
                            <strong>Viernes, 15 de Octubre de 2025</strong>
                        </p>
                        <p class="mb-2">
                            <i class="fas fa-clock me-2"></i>
                            10:00 AM - 12:00 PM
                        </p>
                        <p class="mb-2">
                            <i class="fas fa-book me-2"></i>
                            Bases de Datos
                        </p>
                        <p class="mb-2">
                            <i class="fas fa-map-marker-alt me-2"></i>
                            Salón A-301
                        </p>
                    </div>
                    <div class="alert alert-info mb-0">
                        <strong>Descripción:</strong><br>
                        Examen final del cuatrimestre. Incluye normalización, SQL avanzado y transacciones.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-outline-primary">
                        <i class="fas fa-edit me-2"></i> Editar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                locale: 'es',
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,listWeek'
                },
                buttonText: {
                    today: 'Hoy',
                    month: 'Mes',
                    week: 'Semana',
                    list: 'Lista'
                },
                height: 'auto',
                events: [
                    {
                        title: 'Examen Final - BD',
                        start: '2025-10-15T10:00:00',
                        end: '2025-10-15T12:00:00',
                        backgroundColor: '#dc3545',
                        borderColor: '#dc3545'
                    },
                    {
                        title: 'Entrega Proyecto Web',
                        start: '2025-10-18',
                        backgroundColor: '#ffc107',
                        borderColor: '#ffc107'
                    },
                    {
                        title: 'Inicio de Vacaciones',
                        start: '2025-10-20',
                        backgroundColor: '#198754',
                        borderColor: '#198754'
                    },
                    {
                        title: 'Examen Redes',
                        start: '2025-10-22T14:00:00',
                        backgroundColor: '#dc3545',
                        borderColor: '#dc3545'
                    },
                    {
                        title: 'Taller de Git',
                        start: '2025-10-25T16:00:00',
                        backgroundColor: '#0d6efd',
                        borderColor: '#0d6efd'
                    }
                ],
                eventClick: function(info) {
                    // Abrir modal con detalles del evento
                    var modal = new bootstrap.Modal(document.getElementById('verEventoModal'));
                    document.getElementById('eventoTitulo').textContent = info.event.title;
                    modal.show();
                }
            });
            calendar.render();
        });
        
        function logout() {
            if (confirm('¿Cerrar sesión?')) {
                localStorage.clear();
                window.location.href = '../index.html';
            }
        }
    </script>
</body>
</html>